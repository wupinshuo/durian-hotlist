---
inclusion: always
---

# 榴莲热榜项目开发规范

## 1. 技术栈约定
- 框架：Vue 3（组合式 API，`<script setup lang="ts">`）
- 语言：TypeScript、Vite
- UI 组件库：Element Plus
- 状态管理：优先使用 Vue 自身的响应式 API（如 `ref`、`reactive`），如需全局状态可引入 Pinia
- 使用 pnpm 作为包管理工具
- nodejs版本为 20.16.0
- HTTP 客户端：Axios
- 路由：Vue Router 4

## 2. 目录结构
```
src/
├── api/          # API 接口定义
├── assets/       # 静态资源
├── components/   # 通用组件
├── composables/  # 组合式函数
├── constants/    # 常量定义
├── plugins/      # 插件配置
├── router/       # 路由配置
├── store/        # 状态管理
├── styles/       # 样式文件
├── types/        # 类型定义
└── views/        # 页面视图
```

## 3. 代码风格
- 统一使用 TypeScript，所有变量、函数、props、emit 事件等必须声明类型
- 变量、方法、文件命名采用小驼峰（如 `refreshGithubTrending`），组件文件采用大驼峰（如 `GithubTrendingCard.vue`）
- 事件名统一用小写中划线（如 `@refresh`）
- 组件 props、emit 事件要有类型声明
- 禁止出现未使用的变量、方法、import
- 代码格式化遵循 Prettier 配置（单引号、尾随逗号、80字符宽度、2空格缩进）
- 接口和类型定义使用 `interface` 和 `type`，并以大写字母开头
- 常量使用全大写下划线命名（如 `GITHUB_PERIOD`）

## 4. 组件开发
- 组件应尽量无状态，数据通过 props 传递，事件通过 emit 通知父组件
- 组件样式使用 `scoped`，避免全局污染
- 组件复用时，必须传递必要的 props，避免直接操作父组件数据
- 复杂逻辑应放在 `setup` 内部函数或计算属性中，避免模板复杂表达式
- 组件要尽可能复用
- 组件应遵循单一职责原则，一个组件只负责一个功能
- 基础组件应提供良好的扩展性，通过插槽（slots）支持自定义内容
- 组件间通信优先使用 props/emit，复杂场景可使用 provide/inject 或 Pinia

## 5. API 调用
- API 调用统一通过 `src/api/` 下的函数进行，禁止在组件内直接写请求逻辑
- 异步请求使用 `async/await`，并做好异常处理（try/catch）
- 请求失败时，需通过 `ElMessage` 等方式给用户友好提示
- API 函数应返回类型化的数据，使用 TypeScript 接口定义返回类型
- 所有 API 请求应有超时处理
- 请求参数和响应数据应有明确的类型定义
- 接口地址应使用常量或配置文件管理，便于环境切换

## 6. 样式规范
- 样式采用 BEM 命名法或语义化命名，避免与全局样式冲突
- 响应式布局需兼容主流移动端，使用媒体查询（如 `@media (max-width: 768px)`）
- 样式统一写在 `<style scoped>` 内
- 使用 CSS 变量实现主题切换，变量定义在 `src/styles/theme.css`
- 颜色、字体大小、间距等应使用预定义的 CSS 变量，避免硬编码
- 布局优先使用 Flex 或 Grid，提高响应式适配能力
- 移动端适配断点：
  - 手机：`max-width: 768px`
  - 平板：`max-width: 1024px`
  - 桌面小屏：`max-width: 1280px`
  - 桌面大屏：`min-width: 1281px`

## 7. 组合式函数（Composables）
- 将可复用的逻辑抽象为组合式函数，放在 `src/composables/` 目录下
- 组合式函数命名以 `use` 开头，如 `useUserBehavior`
- 组合式函数应有明确的输入输出类型定义
- 组合式函数应专注于单一功能，遵循单一职责原则
- 组合式函数应处理好内部资源的清理，特别是在 `onUnmounted` 生命周期

## 8. 状态管理
- 局部状态使用组件内的 `ref` 和 `reactive`
- 跨组件共享状态可使用 `provide/inject` 或 Pinia
- Pinia store 应按功能模块划分，放在 `src/store/` 目录下
- store 中的 state、getters、actions 应有明确的类型定义
- 避免在组件中直接修改 store 状态，应通过 actions 修改

## 9. 交互与用户体验
- 所有用户可感知的操作（如刷新、加载失败）需有明确的提示（如 `ElMessage`）
- 禁止出现无响应的按钮或操作
- 加载状态应使用骨架屏（Skeleton）或加载指示器
- 错误处理应友好，提供重试机制
- 表单提交应有验证和提交状态反馈
- 长列表应考虑虚拟滚动或分页
- 交互动效应适度，不影响性能

## 10. 性能优化
- 组件应按需导入，避免全局注册
- 大型第三方库应考虑按需导入
- 列表渲染应使用唯一 key，避免不必要的 DOM 更新
- 避免不必要的计算，合理使用计算属性和缓存
- 大量数据处理应考虑 Web Worker
- 图片资源应优化大小，考虑使用 WebP 格式
- 路由组件应使用异步加载（懒加载）

## 11. 代码注释与文档
- 复杂逻辑、关键代码需有中文注释，描述意图和实现思路
- 公共方法、API 函数需写 JSDoc 注释
- 组件 props 应有详细的类型和描述注释
- 复杂的类型定义应有注释说明
- 重要的业务逻辑应有流程说明
- 组合式函数应有使用示例注释

## 12. 主题系统
- 使用 CSS 变量实现主题切换
- 主题变量定义在 `src/styles/theme.css`
- 支持明暗模式切换，通过 `data-theme` 属性控制
- 组件样式应使用主题变量，确保主题一致性
- 主题切换应有平滑过渡效果

## 13. 错误处理与日志
- 全局错误应有统一处理机制
- API 请求错误应分类处理，区分网络错误、业务错误
- 关键操作应记录日志，便于问题排查
- 开发环境和生产环境的错误处理策略可不同
- 用户操作错误应有友好提示，避免技术术语

## 14. 测试规范
- 核心功能应有单元测试
- 组件应有基本的渲染测试
- 复杂业务逻辑应有集成测试
- 测试用例应覆盖正常流程和异常流程
- 测试文件与源文件应保持相同的目录结构

## 15. 其他
- 禁止直接操作 DOM，优先使用 Vue 的响应式和指令
- 禁止在模板中写复杂表达式，复杂逻辑应放到计算属性或方法中
- 使用 ESLint + Prettier 保持代码风格统一
- Git 提交信息遵循 Conventional Commits 规范
- 项目配置文件（如 `.env`）应有明确的注释说明
- 第三方依赖应谨慎引入，评估其维护状态、体积、安全性